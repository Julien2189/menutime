<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MenuTime</title>

  <link rel="stylesheet" href="style.css"> 
</head>
<body>
    <div class="container">
        <header>
            <div class="img">
                <img src="logoMenuTime.png" class="logo" alt="logoMenuTime">
            </div>
            <div class="header">
                <ul>
                    <li>
                        <a href="#">Accueil</a>
                        <a href="#">Liste de course</a>
                        <a href="#">Connectez-vous</a>
                        <a href="#">Contact</a>
                        <a href="#">A propos</a>
                        <a href="#">Inscription</a>
                        <a href="#">Recettes</a>
                    </li>
                </ul>
            </div>
        </header>
        <main>
            <h1>MenuTime</h1>
            <p>Organisez vos repas,vos courses et vos objectifs nutritionnels en un seul endroit</p>
            <p>MenuTime vous aide a planifier la semaine parfaite en quelques minutes.Ajoutez vos plats,g√©n√©rez la liste de courses et (bientot) suivez vos calories.</p>
            <img src="planification-des-repas-et-composition-des-aliments.jpg" alt="image du site">
            <div class="carte">
            <div class="card">
                    <h2>Planification des repas</h2>
                    <p>Creez vos menus pour toute la semaine</p>
                    <p>Organisez vos menus pour toute la semaine de facon intuitive</p>
                </div>
                <div class="card">
                    <h2>Liste de courses</h2>
                    <p>Generez automatiquement selon vos menus</p>
                    <p>Generez automatiquement vos listes de courses bas√©s sur vos menus planifi√©s</p>
                    <button>Liste de course</button>
                </div>
                <div class="card">
                    <h2>Recettes</h2>
                    <p>Acceder a des recettes</p>
                    <p>Ajoutez et partager vos recettes en ligne</p>
                    <button>Recettes</button>
                </div>
            </div>


<div class="planning-container">
  <!-- Formulaire -->
  <form id="form-planning" autocomplete="off">
    <label>Semaine du :</label>
    <input type="date" id="weekStart" />

    <label>Jour :</label>
    <select id="jour">
      <option value="Lundi">Lundi</option>
      <option value="Mardi">Mardi</option>
      <option value="Mercredi">Mercredi</option>
      <option value="Jeudi">Jeudi</option>
      <option value="Vendredi">Vendredi</option>
      <option value="Samedi">Samedi</option>
      <option value="Dimanche">Dimanche</option>
    </select>

    <label>Repas :</label>
    <select id="repas">
      <option value="Petit-d√©jeuner">Petit-d√©jeuner</option>
      <option value="D√©jeuner">D√©jeuner</option>
      <option value="Diner">Diner</option>
    </select>

    <label>Plat :</label>
    
    <input type="text" id="plat" placeholder="Ex: Pizza" required />
<label for="weekSelect">üìÖ Mes plannings enregistr√©s :</label>
<select id="weekSelect">
  <option value="">-- S√©lectionner une semaine --</option>
</select>
<!-- 
<button id="loadSelectedWeek" type="button">Charger</button>
-->
<button type="submit" id="btn">Ajouter</button>


    
    <button id="exportPDF" type="button">üìÑ Exporter en PDF</button>
   <!--    <button id="exportJSON" type="button">‚¨áÔ∏è Exporter le JSON</button>-->
    <button id="resetPlanning" type="button">R√©initialiser le planning</button>
    <button id="saveAccount" type="button">üíæ Enregistrer sur mon compte</button>
  <!--  <button id="loadAccount" type="button">‚òÅÔ∏è Charger depuis mon compte</button> -->

  </form>

  <!-- Tableau -->
  <div class="planning-wrapper">
    
<div id="weekRange" class="week-range" aria-live="polite"></div>

    <table id="planning">
      <thead>
        <tr>
          <th>Jour</th>
          <th>Petit-d√©jeuner</th>
          <th>D√©jeuner</th>
          <th>Diner</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Lundi</td>  
             <td class="meal-cell" data-day="Lundi" data-meal="Petit-d√©jeuner"><div class="meal-text"></div><button class="add" type="button">+</button></td>
             <td class="meal-cell" data-day="Lundi" data-meal="D√©jeuner"><div class="meal-text"></div><button class="add" type="button">+</button></td>
             <td class="meal-cell" data-day="Lundi" data-meal="Diner"><div class="meal-text"></div><button class="add" type="button">+</button></td>
        </tr>
        <tr><td>Mardi</td>  
            <td class="meal-cell" data-day="Mardi" data-meal="Petit-d√©jeuner"><div class="meal-text"></div><button class="add" type="button">+</button></td>
            <td class="meal-cell" data-day="Mardi" data-meal="D√©jeuner"><div class="meal-text"></div><button class="add" type="button">+</button></td>
            <td class="meal-cell"  data-day="Mardi" data-meal="Diner"><div class="meal-text"></div><button class="add" type="button">+</button></td></tr>
        <tr><td>Mercredi</td>   
            <td class="meal-cell" data-day="Mercredi" data-meal="Petit-d√©jeuner"><div class="meal-text"></div><button class="add" type="button">+</button></td>
            <td class="meal-cell" data-day="Mercredi" data-meal="D√©jeuner"><div class="meal-text"></div><button class="add" type="button">+</button></td>
            <td class="meal-cell" data-day="Mercredi" data-meal="Diner"><div class="meal-text"></div><button class="add" type="button">+</button></td></tr>
        <tr><td>Jeudi</td>  
            <td class="meal-cell" data-day="Jeudi" data-meal="Petit-d√©jeuner"><div class="meal-text"></div><button class="add" type="button">+</button></td>
            <td class="meal-cell" data-day="Jeudi" data-meal="D√©jeuner"><div class="meal-text"></div><button class="add" type="button">+</button></td>
            <td class="meal-cell" data-day="Jeudi" data-meal="Diner"><div class="meal-text"></div><button class="add" type="button">+</button></td></tr>
        <tr><td>Vendredi</td>  
            <td  class="meal-cell" data-day="Vendredi" data-meal="Petit-d√©jeuner"><div class="meal-text"></div><button class="add" type="button">+</button></td>
            <td class="meal-cell" data-day="Vendredi" data-meal="D√©jeuner"><div class="meal-text"></div><button class="add" type="button">+</button></td>
            <td class="meal-cell" data-day="Vendredi" data-meal="Diner"><div class="meal-text"></div><button class="add" type="button">+</button></td></tr>
        <tr><td>Samedi</td>  
            <td class="meal-cell" data-day="Samedi" data-meal="Petit-d√©jeuner"><div class="meal-text"></div><button class="add" type="button">+</button></td>
            <td class="meal-cell" data-day="Samedi" data-meal="D√©jeuner"><div class="meal-text"></div><button class="add" type="button">+</button></td>
            <td class="meal-cell" data-day="Samedi" data-meal="Diner"><div class="meal-text"></div><button class="add" type="button">+</button></td></tr>
        <tr><td>Dimanche</td>  
            <td class="meal-cell" data-day="Dimanche" data-meal="Petit-d√©jeuner"><div class="meal-text"></div><button class="add" type="button">+</button></td>
            <td class="meal-cell" data-day="Dimanche" data-meal="D√©jeuner"><div class="meal-text"></div><button class="add" type="button">+</button></td>
            <td class="meal-cell" data-day="Dimanche" data-meal="Diner"><div class="meal-text"></div><button class="add" type="button">+</button></td>
          </tr>
      </tbody>
    </table>
  </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js" referrerpolicy="no-referrer"></script>
<script>
  const addButtons = document.querySelectorAll('.add') ;
  const inputPlat = document.getElementById('plat');
  const ajout = document.getElementById('btn') ;
  const selectRepas = document.getElementById('repas') ;
  const selectJour =  document.getElementById('jour') ;
 

  addButtons.forEach((btn) =>{
    btn.addEventListener('click' , () =>{
      const value = window.prompt('quelle plat a ajouter :') ;
      const test = btn.closest('td') ; 
     const day = test.dataset.day ;
     const meal = test.dataset.meal ; 
      console.log( " " + day + " " + meal) ;
      if(!value || value.trim() === "") {
        alert('erreur de saisie') ;
        return ; 
      }
     
        const ajout = test.querySelector('.meal-text') ;
        const task = document.createElement("div") ;
        task.className = "task" ;
        const span = document.createElement("span") ;
        span.textContent = value.trim() ;
        const delBtn = document.createElement("button") ;
        delBtn.type = "button" ;
        delBtn.textContent = "\u274C";
        
         //const cell = document.querySelector(`#planning td[data-day="${day}"][data-meal="${meal}"]`) ;
       // cell.querySelector(".meal-text").textContent = value ;
      delBtn.addEventListener('click' , (e) =>{
        e.stopPropagation() ; 
        task.remove() ;
      });
      task.appendChild(span) ;
      task.appendChild(delBtn) ;
      ajout.appendChild(task);
    })
  });
 
  
  ajout.addEventListener('click' , (e) =>{
    e.preventDefault() ;
      const day = selectJour.value ; 
    const meal = selectRepas.value ;
    const plat = inputPlat.value ; 

     function message(plat, day , meal) {
    const cell = document.querySelector(
  `#planning td[data-day="${day}"][data-meal="${meal}"]`
);
cell.textContent = plat ;
     }
    message(plat,day,meal) ;
    

  });
</script>
</body>
</html>